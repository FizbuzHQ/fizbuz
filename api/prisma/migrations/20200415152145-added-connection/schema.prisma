datasource DS {
  provider = "sqlite"
  url = "***"
}

generator client {
  provider      = "prisma-client-js"
  binaryTargets = env("BINARY_TARGET")
}

model User {
  id                  String       @default(cuid()) @id
  auth0Sub            String
  email               String       @unique
  productEmail        Boolean      @default(true)
  promotionalEmail    Boolean      @default(true)
  inboundConnections  Connection[] @relation("inboundConnections")
  outboundConnections Connection[] @relation("outboundConnections")
  createdAt           DateTime     @default(now())
  updatedAt           DateTime?
  deletedAt           DateTime?
}

model Connection {
  id          String    @default(cuid()) @id
  user        User      @relation("outboundConnections", fields: [userId], references: [id])
  userId      String
  connected   User      @relation("inboundConnections", fields: [connectedId], references: [id])
  connectedId String
  pin         String
  comment     String?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime?
  deletedAt   DateTime?

  @@unique([userId, connectedId])
}
